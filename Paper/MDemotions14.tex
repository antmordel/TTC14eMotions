\newif\ifdraft
\drafttrue
%\draftfalse

\ifdraft
  \documentclass[draft]{llncs}
  \usepackage{color}
  \usepackage[normalem]{ulem}
  \definecolor{green}{rgb}{.2,.8,0}
  \definecolor{blue}{rgb}{0,0,1}
  \definecolor{red}{rgb}{1,0,0}

  \usepackage[final]{graphicx}  
  
  \newcommand{\change}[1]{\textcolor{green}{#1}}
  \newcommand{\delete}[1]{\textcolor{red}{\sout{#1}}}
  \newcommand{\tbc}[1]{\textcolor{blue}{#1}}
  \newcommand{\todo}[1]{\textbf{\color{red}{TO-DO}}: #1}
  \newcommand{\mnote}[1]{\marginnote{#1}}
  
\else
  \documentclass{llncs}
  \usepackage{graphicx}
  
  \newcommand{\change}[1]{#1}
  \newcommand{\delete}[1]{}
  \newcommand{\tbc}[1]{#1}
  \newcommand{\todo}[1]{}
  \newcommand{\mnote}[1]{}
\fi

\usepackage{url}
\usepackage{alltt,verbatim}
\usepackage{soul}
\usepackage{subfig}
\usepackage{pifont}
\usepackage[utf8]{inputenc}

\usepackage[all]{xy}
\newcommand{\code}[1]{{\texttt{#1}}}

% MARGIN NOTES
\marginparwidth 1.25 true in

\newcounter{marginalnote}
\setcounter{marginalnote}{1}
\renewcommand{\themarginalnote}{\roman{marginalnote}}
\newcommand{\marginnote}[1]
           {\raisebox{1ex}{\scriptsize (\themarginalnote)}%
            \marginpar{\footnotesize\raggedright\indent
                       \raisebox{1ex}{\scriptsize (\themarginalnote)} #1}%
            \addtocounter{marginalnote}{1}}
% MARGIN NOTES

% Maude code
\usepackage[final]{listings}
\usepackage{xcolor}
\lstdefinelanguage{maude}
{
	alsoletter={\:},
    morecomment=[l]{---},
    morecomment=[l]{***},
    keywords={pr, protecting, sort, sorts, subsort, subsorts, including, class, msg, msgs, endfm, fmod, is, mod, endm, omod, endom},
    keywords=[2]{eq,  mb, ceq, if, rl, crl, else, then, fi},
    keywords=[3]{ctor, assoc, comm, gather, id\:},
    keywords=[4]{op, ops, var, vars}
}

\lstset{
  language=maude,
  basicstyle=\ttfamily\footnotesize,
  frame=tb,
	framerule=0.2pt,
  %keywordstyle=\bfseries,
	%keywordstyle=[2]\bfseries,
	%keywordstyle=[3]\bfseries,
	%keywordstyle=[4]\bfseries,
}
% Maude code

\DeclareGraphicsExtensions{.png}

\pagestyle{headings} % switches on printing of running heads
%\addtocmark{XXXX} % additional mark in the TOC

\title{The Movie Database Case: \\ A solution using the Maude-based e-Motions tool}
\titlerunning{TO-DO} % abbreviated title (for running head) also used for the TOC unless \toctitle is used

\author{Antonio~Moreno-Delgado \and Francisco~Dur\'an}
\authorrunning{Moreno et al.} %abbreviated author list (for running head)

%%%% modified list of authors for the TOC (add the affiliations)
\tocauthor{
  Antonio Moreno-Delgado (Universidad de M\'alaga),
  Francisco Dur\'an (Universidad de M\'alaga)
}

\institute{
    University of M\'alaga\\
    \email{\{amoreno,duran\}@lcc.uma.es}
    }

\begin{document}

\maketitle

\begin{abstract}
The paper presents solutions for the TTC 2014 Movie Database Case, both in the e-Motions DSML and in the rewriting-logic formal language Maude. The DSLs defined in e-Motions are automatically transformed into Maude specifications, which are then used for simulation and analysis purposes. However, since e-Motions is a general purpose language, in which real-time languages may be modeled, with full support for OCL and other advanced features, the Maude specifications automatically generated are not as efficient as one would like. Since most of these features are not needed for the current tasks, we propose solutions both in e-Motions and in Maude, trying to highlight the main features of both languages. The fact that the solutions given directly in Maude lack the overhead included by e-Motions to deal with all those features it provides that are not needed in the current case study, what makes the solutions given much more efficient, and being able to deal with bigger problems. 
\end{abstract}

%-------------------------------------------------------------
%  INTRODUCTION
%-------------------------------------------------------------
\section{Introduction}
\label{sec:intro}
\input{01_introduction}

%-------------------------------------------------------------
% SOLUTIONS
%-------------------------------------------------------------
\section{Solution}
\label{sec:solution}
\input{020_solutions}

\subsection{Task 1}
\label{sub:task1}
\input{021_task1}

\subsection{Task 2}
\label{sub:task2}
\input{022_task2}

\subsection{Task 3}
\label{sub:task3}
\input{023_task3}

%-------------------------------------------------------------
% CONCLUSIONS
%-------------------------------------------------------------
\section{Conclusions}

\input{03_conclusions}

\bibliographystyle{splncs03}
\bibliography{TTC14,duran}
\providecommand{\url}[1]{\texttt{#1}}
\end{document}
